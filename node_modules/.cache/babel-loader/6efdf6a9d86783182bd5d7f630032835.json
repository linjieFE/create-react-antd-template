{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/divider/style\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nvar _jsxFileName = \"/Users/flexiv/Downloads/react-antd-admin-template-master/src/views/user/index.jsx\";\nimport React, { Component } from \"react\";\nimport { getUsers, deleteUser, editUser, addUser } from \"@/api/user\";\nimport TypingCard from '@/components/TypingCard';\nimport EditUserForm from \"./forms/edit-user-form\";\nimport AddUserForm from \"./forms/add-user-form\";\nconst {\n  Column\n} = _Table;\n\nclass User extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      users: [],\n      editUserModalVisible: false,\n      editUserModalLoading: false,\n      currentRowData: {},\n      addUserModalVisible: false,\n      addUserModalLoading: false\n    };\n\n    this.getUsers = async () => {\n      const result = await getUsers();\n      const {\n        users,\n        status\n      } = result.data;\n\n      if (status === 0) {\n        this.setState({\n          users\n        });\n      }\n    };\n\n    this.handleEditUser = row => {\n      this.setState({\n        currentRowData: Object.assign({}, row),\n        editUserModalVisible: true\n      });\n    };\n\n    this.handleDeleteUser = row => {\n      const {\n        id\n      } = row;\n\n      if (id === \"admin\") {\n        _message.error(\"不能删除管理员用户！\");\n\n        return;\n      }\n\n      deleteUser({\n        id\n      }).then(res => {\n        _message.success(\"删除成功\");\n\n        this.getUsers();\n      });\n    };\n\n    this.handleEditUserOk = _ => {\n      const {\n        form\n      } = this.editUserFormRef.props;\n      form.validateFields((err, values) => {\n        if (err) {\n          return;\n        }\n\n        this.setState({\n          editModalLoading: true\n        });\n        editUser(values).then(response => {\n          form.resetFields();\n          this.setState({\n            editUserModalVisible: false,\n            editUserModalLoading: false\n          });\n\n          _message.success(\"编辑成功!\");\n\n          this.getUsers();\n        }).catch(e => {\n          _message.success(\"编辑失败,请重试!\");\n        });\n      });\n    };\n\n    this.handleCancel = _ => {\n      this.setState({\n        editUserModalVisible: false,\n        addUserModalVisible: false\n      });\n    };\n\n    this.handleAddUser = row => {\n      this.setState({\n        addUserModalVisible: true\n      });\n    };\n\n    this.handleAddUserOk = _ => {\n      const {\n        form\n      } = this.addUserFormRef.props;\n      form.validateFields((err, values) => {\n        if (err) {\n          return;\n        }\n\n        this.setState({\n          addUserModalLoading: true\n        });\n        addUser(values).then(response => {\n          form.resetFields();\n          this.setState({\n            addUserModalVisible: false,\n            addUserModalLoading: false\n          });\n\n          _message.success(\"添加成功!\");\n\n          this.getUsers();\n        }).catch(e => {\n          _message.success(\"添加失败,请重试!\");\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getUsers();\n  }\n\n  render() {\n    const {\n      users\n    } = this.state;\n    const title = /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handleAddUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, \"\\u6DFB\\u52A0\\u7528\\u6237\"));\n    const cardContent = `在这里，你可以对系统中的用户进行管理，例如添加一个新用户，或者修改系统中已经存在的用户。`;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TypingCard, {\n      title: \"\\u7528\\u6237\\u7BA1\\u7406\",\n      source: cardContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(_Card, {\n      title: title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(_Table, {\n      bordered: true,\n      rowKey: \"id\",\n      dataSource: users,\n      pagination: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Column, {\n      title: \"\\u7528\\u6237ID\",\n      dataIndex: \"id\",\n      key: \"id\",\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Column, {\n      title: \"\\u7528\\u6237\\u540D\\u79F0\",\n      dataIndex: \"name\",\n      key: \"name\",\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Column, {\n      title: \"\\u7528\\u6237\\u89D2\\u8272\",\n      dataIndex: \"role\",\n      key: \"role\",\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Column, {\n      title: \"\\u7528\\u6237\\u63CF\\u8FF0\",\n      dataIndex: \"description\",\n      key: \"description\",\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Column, {\n      title: \"\\u64CD\\u4F5C\",\n      key: \"action\",\n      width: 195,\n      align: \"center\",\n      render: (text, row) => /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        shape: \"circle\",\n        icon: \"edit\",\n        title: \"\\u7F16\\u8F91\",\n        onClick: this.handleEditUser.bind(null, row),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(_Divider, {\n        type: \"vertical\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        shape: \"circle\",\n        icon: \"delete\",\n        title: \"\\u5220\\u9664\",\n        onClick: this.handleDeleteUser.bind(null, row),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(EditUserForm, {\n      currentRowData: this.state.currentRowData,\n      wrappedComponentRef: formRef => this.editUserFormRef = formRef,\n      visible: this.state.editUserModalVisible,\n      confirmLoading: this.state.editUserModalLoading,\n      onCancel: this.handleCancel,\n      onOk: this.handleEditUserOk,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(AddUserForm, {\n      wrappedComponentRef: formRef => this.addUserFormRef = formRef,\n      visible: this.state.addUserModalVisible,\n      confirmLoading: this.state.addUserModalLoading,\n      onCancel: this.handleCancel,\n      onOk: this.handleAddUserOk,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default User;","map":{"version":3,"sources":["/Users/flexiv/Downloads/react-antd-admin-template-master/src/views/user/index.jsx"],"names":["React","Component","getUsers","deleteUser","editUser","addUser","TypingCard","EditUserForm","AddUserForm","Column","User","state","users","editUserModalVisible","editUserModalLoading","currentRowData","addUserModalVisible","addUserModalLoading","result","status","data","setState","handleEditUser","row","Object","assign","handleDeleteUser","id","error","then","res","success","handleEditUserOk","_","form","editUserFormRef","props","validateFields","err","values","editModalLoading","response","resetFields","catch","e","handleCancel","handleAddUser","handleAddUserOk","addUserFormRef","componentDidMount","render","title","cardContent","text","bind","formRef"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Card, Button, Table, message, Divider } from \"antd\";\nimport { getUsers, deleteUser, editUser, addUser } from \"@/api/user\";\nimport TypingCard from '@/components/TypingCard'\nimport EditUserForm from \"./forms/edit-user-form\"\nimport AddUserForm from \"./forms/add-user-form\"\nconst { Column } = Table;\nclass User extends Component {\n  state = {\n    users: [],\n    editUserModalVisible: false,\n    editUserModalLoading: false,\n    currentRowData: {},\n    addUserModalVisible: false,\n    addUserModalLoading: false,\n  };\n  getUsers = async () => {\n    const result = await getUsers()\n    const { users, status } = result.data\n    if (status === 0) {\n      this.setState({\n        users\n      })\n    }\n  }\n  handleEditUser = (row) => {\n    this.setState({\n      currentRowData:Object.assign({}, row),\n      editUserModalVisible: true,\n    });\n  };\n\n  handleDeleteUser = (row) => {\n    const { id } = row\n    if (id === \"admin\") {\n      message.error(\"不能删除管理员用户！\")\n      return\n    }\n    deleteUser({id}).then(res => {\n      message.success(\"删除成功\")\n      this.getUsers();\n    })\n  }\n  \n  handleEditUserOk = _ => {\n    const { form } = this.editUserFormRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      this.setState({ editModalLoading: true, });\n      editUser(values).then((response) => {\n        form.resetFields();\n        this.setState({ editUserModalVisible: false, editUserModalLoading: false });\n        message.success(\"编辑成功!\")\n        this.getUsers()\n      }).catch(e => {\n        message.success(\"编辑失败,请重试!\")\n      })\n      \n    });\n  };\n\n  handleCancel = _ => {\n    this.setState({\n      editUserModalVisible: false,\n      addUserModalVisible: false,\n    });\n  };\n\n  handleAddUser = (row) => {\n    this.setState({\n      addUserModalVisible: true,\n    });\n  };\n\n  handleAddUserOk = _ => {\n    const { form } = this.addUserFormRef.props;\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      this.setState({ addUserModalLoading: true, });\n      addUser(values).then((response) => {\n        form.resetFields();\n        this.setState({ addUserModalVisible: false, addUserModalLoading: false });\n        message.success(\"添加成功!\")\n        this.getUsers()\n      }).catch(e => {\n        message.success(\"添加失败,请重试!\")\n      })\n    });\n  };\n  componentDidMount() {\n    this.getUsers()\n  }\n  render() {\n    const { users } = this.state\n    const title = (\n      <span>\n        <Button type='primary' onClick={this.handleAddUser}>添加用户</Button>\n      </span>\n    )\n    const cardContent = `在这里，你可以对系统中的用户进行管理，例如添加一个新用户，或者修改系统中已经存在的用户。`\n    return (\n      <div className=\"app-container\">\n        <TypingCard title='用户管理' source={cardContent} />\n        <br/>\n        <Card title={title}>\n          <Table bordered rowKey=\"id\" dataSource={users} pagination={false}>\n            <Column title=\"用户ID\" dataIndex=\"id\" key=\"id\" align=\"center\"/>\n            <Column title=\"用户名称\" dataIndex=\"name\" key=\"name\" align=\"center\"/>\n            <Column title=\"用户角色\" dataIndex=\"role\" key=\"role\" align=\"center\"/>\n            <Column title=\"用户描述\" dataIndex=\"description\" key=\"description\" align=\"center\" />\n            <Column title=\"操作\" key=\"action\" width={195} align=\"center\"render={(text, row) => (\n              <span>\n                <Button type=\"primary\" shape=\"circle\" icon=\"edit\" title=\"编辑\" onClick={this.handleEditUser.bind(null,row)}/>\n                <Divider type=\"vertical\" />\n                <Button type=\"primary\" shape=\"circle\" icon=\"delete\" title=\"删除\" onClick={this.handleDeleteUser.bind(null,row)}/>\n              </span>\n            )}/>\n          </Table>\n        </Card>\n        <EditUserForm\n          currentRowData={this.state.currentRowData}\n          wrappedComponentRef={formRef => this.editUserFormRef = formRef}\n          visible={this.state.editUserModalVisible}\n          confirmLoading={this.state.editUserModalLoading}\n          onCancel={this.handleCancel}\n          onOk={this.handleEditUserOk}\n        />  \n        <AddUserForm\n          wrappedComponentRef={formRef => this.addUserFormRef = formRef}\n          visible={this.state.addUserModalVisible}\n          confirmLoading={this.state.addUserModalLoading}\n          onCancel={this.handleCancel}\n          onOk={this.handleAddUserOk}\n        />  \n      </div>\n    );\n  }\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}